---
import { getCollection } from 'astro:content';
import Blog from '../../layouts/Blog.astro';
import { SITE_TITLE, SITE_DESCRIPTION, PAGE_SIZE } from '../../consts';
import Entry from '../../components/entry/Entry.astro';
import type { GetStaticPathsOptions } from 'astro';

export async function getStaticPaths({ paginate } : GetStaticPathsOptions) {
	const posts = await getCollection('entry');
	return paginate(posts, { pageSize: PAGE_SIZE });
}

const { page } = Astro.props;
---

<Blog title={SITE_TITLE}, description={SITE_DESCRIPTION}>
	<div>
		<Entry posts={page.data} />
		<div class="pagination">
			<ul>
				<li>
					{page.url.prev ? <a href={page.url.prev}>PREV</a> : <a class="inactive">PREV</a>}
				</li>
			</ul>
			<p>{page.currentPage}/{page.lastPage}</p>
			<ul>
				<li>
					{page.url.next ? <a href={page.url.next}>NEXT</a> : <a class="inactive">NEXT</a>}
				</li>
			</ul>
		</div>
	</div>
</Blog>


<style>
	.pagination {
		display:flex;
		justify-content: space-around;
	}

	ul {
		list-style-type: none;
		padding: 0;
	}

	li a {
		display: flex;
		justify-content: center;
		width: 70px;
		text-decoration: none;
		background:#edffe8;
		padding: 3px;
		border-radius: 6px; 
		text-decoration: none; 
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); 
		transition: box-shadow 0.3s ease; 
	}

	.inactive {
		pointer-events: none;
    text-decoration: none;
		color: #000a527b;
	}
</style>
